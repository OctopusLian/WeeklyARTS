## 从零到一搭建出一个定时删除文件夹框架的收获  
#### 一、概述  

框架的功能：定时读取指定路径下的配置文件，扫描配置文件中的节点，然后拼出一个新的路径，在该路径下判断任务文件夹是否该删除，如果该路径下的任务文件夹为0，同时删除该路径。  


#### 二、所需要的关键技能点  

技能概述  

- Go语言基本语法  
- channel机制：通道负责传输数据，同时具有安全保障。  
- goroutine机制：多协程分发协作完成所需任务。  
- 并发原理  
- 熟悉常见的设计模式  
- 单元测试，依赖注入  
- 日志系统：方便排查问题和跟踪程序的执行过程。  

#### 三、搭建步骤  

通过爬楼梯形式一步步完善框架的功能  

1，写出通过扫描指定路径打印该路径下的所有文件和文件夹；  

可以用 ioutil.ReadDir 函数实现  

 

2，加入定时器，定时打印指定路径下的所有文件和文件夹；  

可以用 Ticker 实现  

 

3，在指定路径下添加以时间命名的文件夹，定时将其符合条件的删除，不符合条件的删除；  

可以用 Unix时间戳 实现  

 

4，在指定路径下添加配置文件，通过扫描其节点重新拼凑成一个新的路径输出；  

5，在重新拼凑的新路径内创建需要定时删除的文件夹，并判断如果文件夹为空，将该路径也一并删除;  

6，添加日志系统;  

7，进行单元测试;   

 

#### 四、收获  

三周时间从零到一搭建出了一个框架，带给我的感触很多。  

从踩的坑来看有非法指针访问，类型转换，函数作用域，在步骤五中出现类比失误，将命令行与图形化操作界面进行类比，阻碍了解决思路；  

get到的技能有熟悉运用了两个设计模式，对结构体，指针的作用有了更深入的理解，学会用Unix时间戳对文件夹进行删除判断，熟练使用Go语言对文件和文件夹的操作，理解进程、线程、协程之间的区别，熟练掌握Go语言的两个并发机制 channel和 goroutine。  
